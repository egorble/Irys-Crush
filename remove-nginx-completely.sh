#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è nginx, SSL —Ç–∞ –≤—Å—ñ—Ö –ø–æ–≤'—è–∑–∞–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
echo "üóëÔ∏è  –ü–û–í–ù–ï –í–ò–î–ê–õ–ï–ù–ù–Ø NGINX, SSL –¢–ê –í–°–Ü–• –ö–û–ú–ü–û–ù–ï–ù–¢–Ü–í"
echo "‚ö†Ô∏è  –£–í–ê–ì–ê: –¶–µ –≤–∏–¥–∞–ª–∏—Ç—å –í–°–ï –ø–æ–≤'—è–∑–∞–Ω–µ –∑ nginx —Ç–∞ SSL!"
echo ""

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤ root
if [ "$EUID" -ne 0 ]; then
    echo "‚ùå –¶–µ–π —Å–∫—Ä–∏–ø—Ç –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –∑ –ø—Ä–∞–≤–∞–º–∏ root!"
    echo "–í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ: sudo $0"
    exit 1
fi

echo "üîç –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω —Å–∏—Å—Ç–µ–º–∏:"
echo "   Nginx: $(which nginx 2>/dev/null || echo '–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ')"
echo "   Certbot: $(which certbot 2>/dev/null || echo '–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ')"
echo ""

read -p "‚ö†Ô∏è  –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –ø–æ–≤–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è? (y/N): " -n 1 -r
echo
if [[ ! $REPLY =~ ^[Yy]$ ]]; then
    echo "‚ùå –°–∫–∞—Å–æ–≤–∞–Ω–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º"
    exit 1
fi

echo ""
echo "üî• –ü–û–ß–ò–ù–ê–Ñ–ú–û –ü–û–í–ù–ï –í–ò–î–ê–õ–ï–ù–ù–Ø..."
echo ""

# ============================================
# –ö–†–û–ö 1: –ó–£–ü–ò–ù–ö–ê –í–°–Ü–• –°–ï–†–í–Ü–°–Ü–í
# ============================================
echo "‚è∏Ô∏è  –ö–†–û–ö 1: –ó—É–ø–∏–Ω–∫–∞ –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤..."

# –ó—É–ø–∏–Ω–∫–∞ nginx
systemctl stop nginx 2>/dev/null && echo "‚úÖ Nginx –∑—É–ø–∏–Ω–µ–Ω–æ" || echo "‚ÑπÔ∏è  Nginx –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ"
systemctl disable nginx 2>/dev/null && echo "‚úÖ Nginx –≤—ñ–¥–∫–ª—é—á–µ–Ω–æ –∑ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫—É" || echo "‚ÑπÔ∏è  Nginx –Ω–µ –≤ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫—É"

# –ó—É–ø–∏–Ω–∫–∞ certbot
systemctl stop certbot.timer 2>/dev/null && echo "‚úÖ Certbot timer –∑—É–ø–∏–Ω–µ–Ω–æ" || echo "‚ÑπÔ∏è  Certbot timer –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ"
systemctl disable certbot.timer 2>/dev/null && echo "‚úÖ Certbot timer –≤—ñ–¥–∫–ª—é—á–µ–Ω–æ" || echo "‚ÑπÔ∏è  Certbot timer –Ω–µ –≤ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫—É"

# –ó—É–ø–∏–Ω–∫–∞ –≤—Å—ñ—Ö nginx –ø—Ä–æ—Ü–µ—Å—ñ–≤
pkill -f nginx 2>/dev/null && echo "‚úÖ –í—Å—ñ nginx –ø—Ä–æ—Ü–µ—Å–∏ –∑—É–ø–∏–Ω–µ–Ω—ñ" || echo "‚ÑπÔ∏è  Nginx –ø—Ä–æ—Ü–µ—Å–∏ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω—ñ"

echo "‚úÖ –°–µ—Ä–≤—ñ—Å–∏ –∑—É–ø–∏–Ω–µ–Ω—ñ"

# ============================================
# –ö–†–û–ö 2: –í–ò–î–ê–õ–ï–ù–ù–Ø NGINX –ü–ê–ö–ï–¢–Ü–í
# ============================================
echo ""
echo "üì¶ –ö–†–û–ö 2: –í–∏–¥–∞–ª–µ–Ω–Ω—è nginx –ø–∞–∫–µ—Ç—ñ–≤..."

# –í–∏–¥–∞–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö nginx –ø–∞–∫–µ—Ç—ñ–≤
apt-get remove --purge nginx nginx-common nginx-core nginx-full nginx-light nginx-extras -y 2>/dev/null
apt-get remove --purge 'nginx*' -y 2>/dev/null

# –í–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
apt-get autoremove -y 2>/dev/null
apt-get autoclean 2>/dev/null

echo "‚úÖ Nginx –ø–∞–∫–µ—Ç–∏ –≤–∏–¥–∞–ª–µ–Ω—ñ"

# ============================================
# –ö–†–û–ö 3: –í–ò–î–ê–õ–ï–ù–ù–Ø CERTBOT –¢–ê SSL
# ============================================
echo ""
echo "üîí –ö–†–û–ö 3: –í–∏–¥–∞–ª–µ–Ω–Ω—è certbot —Ç–∞ SSL..."

# –í—ñ–¥–∫–ª–∏–∫–∞–Ω–Ω—è –≤—Å—ñ—Ö —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤ (—è–∫—â–æ –º–æ–∂–ª–∏–≤–æ)
if command -v certbot &> /dev/null; then
    echo "üîÑ –°–ø—Ä–æ–±–∞ –≤—ñ–¥–∫–ª–∏–∫–∞–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤..."
    certbot delete --cert-name iryscrush.xyz 2>/dev/null || echo "‚ÑπÔ∏è  –°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç iryscrush.xyz –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ"
    
    # –í—ñ–¥–∫–ª–∏–∫–∞–Ω–Ω—è –≤—Å—ñ—Ö —ñ–Ω—à–∏—Ö —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤
    for cert in $(certbot certificates 2>/dev/null | grep "Certificate Name:" | awk '{print $3}'); do
        echo "üóëÔ∏è  –í–∏–¥–∞–ª–µ–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞: $cert"
        certbot delete --cert-name "$cert" 2>/dev/null || echo "‚ö†Ô∏è  –ù–µ –≤–¥–∞–ª–æ—Å—è –≤–∏–¥–∞–ª–∏—Ç–∏ $cert"
    done
fi

# –í–∏–¥–∞–ª–µ–Ω–Ω—è certbot –ø–∞–∫–µ—Ç—ñ–≤
apt-get remove --purge certbot python3-certbot-nginx python3-certbot-apache python3-certbot* -y 2>/dev/null
apt-get remove --purge 'certbot*' -y 2>/dev/null
apt-get remove --purge 'python3-certbot*' -y 2>/dev/null

echo "‚úÖ Certbot –≤–∏–¥–∞–ª–µ–Ω–æ"

# ============================================
# –ö–†–û–ö 4: –í–ò–î–ê–õ–ï–ù–ù–Ø –í–°–Ü–• –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–ô
# ============================================
echo ""
echo "üóÇÔ∏è  –ö–†–û–ö 4: –í–∏–¥–∞–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π..."

# Nginx –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
echo "üóëÔ∏è  –í–∏–¥–∞–ª–µ–Ω–Ω—è nginx –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π..."
rm -rf /etc/nginx/
rm -rf /var/lib/nginx/
rm -rf /var/cache/nginx/
rm -rf /var/log/nginx/
rm -rf /usr/share/nginx/
rm -rf /etc/default/nginx
rm -rf /etc/init.d/nginx
rm -rf /etc/logrotate.d/nginx

# SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ —Ç–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
echo "üóëÔ∏è  –í–∏–¥–∞–ª–µ–Ω–Ω—è SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤..."
rm -rf /etc/letsencrypt/
rm -rf /var/lib/letsencrypt/
rm -rf /var/log/letsencrypt/
rm -rf /etc/ssl/certs/nginx*
rm -rf /etc/ssl/private/nginx*

# Systemd —Å–µ—Ä–≤—ñ—Å–∏
echo "üóëÔ∏è  –í–∏–¥–∞–ª–µ–Ω–Ω—è systemd —Å–µ—Ä–≤—ñ—Å—ñ–≤..."
rm -rf /lib/systemd/system/nginx.service
rm -rf /etc/systemd/system/nginx.service
rm -rf /lib/systemd/system/certbot.service
rm -rf /lib/systemd/system/certbot.timer
rm -rf /etc/systemd/system/certbot.service
rm -rf /etc/systemd/system/certbot.timer

# –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è systemd
systemctl daemon-reload

echo "‚úÖ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –≤–∏–¥–∞–ª–µ–Ω—ñ"

# ============================================
# –ö–†–û–ö 5: –í–ò–î–ê–õ–ï–ù–ù–Ø –ö–ï–®–£ –¢–ê –¢–ò–ú–ß–ê–°–û–í–ò–• –§–ê–ô–õ–Ü–í
# ============================================
echo ""
echo "üßπ –ö–†–û–ö 5: –û—á–∏—â–µ–Ω–Ω—è –∫–µ—à—É —Ç–∞ —Ç–∏–º—á–∞—Å–æ–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤..."

# APT –∫–µ—à
echo "üóëÔ∏è  –û—á–∏—â–µ–Ω–Ω—è APT –∫–µ—à—É..."
apt-get clean
apt-get autoclean

# –ö–µ—à nginx
echo "üóëÔ∏è  –û—á–∏—â–µ–Ω–Ω—è nginx –∫–µ—à—É..."
rm -rf /var/cache/nginx/
rm -rf /tmp/nginx*
rm -rf /var/tmp/nginx*

# –õ–æ–≥–∏
echo "üóëÔ∏è  –û—á–∏—â–µ–Ω–Ω—è –ª–æ–≥—ñ–≤..."
rm -rf /var/log/nginx*
rm -rf /var/log/letsencrypt*
rm -rf /var/log/certbot*

# PID —Ñ–∞–π–ª–∏
echo "üóëÔ∏è  –û—á–∏—â–µ–Ω–Ω—è PID —Ñ–∞–π–ª—ñ–≤..."
rm -rf /var/run/nginx*
rm -rf /run/nginx*

# –°–æ–∫–µ—Ç–∏
echo "üóëÔ∏è  –û—á–∏—â–µ–Ω–Ω—è —Å–æ–∫–µ—Ç—ñ–≤..."
rm -rf /var/lib/nginx/
rm -rf /run/nginx/

echo "‚úÖ –ö–µ—à —Ç–∞ —Ç–∏–º—á–∞—Å–æ–≤—ñ —Ñ–∞–π–ª–∏ –æ—á–∏—â–µ–Ω—ñ"

# ============================================
# –ö–†–û–ö 6: –í–ò–î–ê–õ–ï–ù–ù–Ø –ö–û–†–ò–°–¢–£–í–ê–ß–Ü–í –¢–ê –ì–†–£–ü
# ============================================
echo ""
echo "üë• –ö–†–û–ö 6: –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —Ç–∞ –≥—Ä—É–ø..."

# –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ www-data (–æ–±–µ—Ä–µ–∂–Ω–æ!)
if id "www-data" &>/dev/null; then
    # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è www-data —ñ–Ω—à–∏–º–∏ —Å–µ—Ä–≤—ñ—Å–∞–º–∏
    if ! pgrep -u www-data > /dev/null 2>&1; then
        echo "üóëÔ∏è  –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ www-data..."
        userdel www-data 2>/dev/null || echo "‚ö†Ô∏è  –ù–µ –≤–¥–∞–ª–æ—Å—è –≤–∏–¥–∞–ª–∏—Ç–∏ www-data"
    else
        echo "‚ö†Ô∏è  www-data –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —ñ–Ω—à–∏–º–∏ –ø—Ä–æ—Ü–µ—Å–∞–º–∏, –∑–∞–ª–∏—à–∞—î–º–æ"
    fi
else
    echo "‚ÑπÔ∏è  –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á www-data –Ω–µ —ñ—Å–Ω—É—î"
fi

# –í–∏–¥–∞–ª–µ–Ω–Ω—è –≥—Ä—É–ø–∏ nginx
if getent group nginx > /dev/null 2>&1; then
    echo "üóëÔ∏è  –í–∏–¥–∞–ª–µ–Ω–Ω—è –≥—Ä—É–ø–∏ nginx..."
    groupdel nginx 2>/dev/null || echo "‚ö†Ô∏è  –ù–µ –≤–¥–∞–ª–æ—Å—è –≤–∏–¥–∞–ª–∏—Ç–∏ –≥—Ä—É–ø—É nginx"
else
    echo "‚ÑπÔ∏è  –ì—Ä—É–ø–∞ nginx –Ω–µ —ñ—Å–Ω—É—î"
fi

echo "‚úÖ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ —Ç–∞ –≥—Ä—É–ø–∏ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω—ñ"

# ============================================
# –ö–†–û–ö 7: –û–ß–ò–©–ï–ù–ù–Ø CRON –ó–ê–í–î–ê–ù–¨
# ============================================
echo ""
echo "‚è∞ –ö–†–û–ö 7: –û—á–∏—â–µ–Ω–Ω—è cron –∑–∞–≤–¥–∞–Ω—å..."

# –í–∏–¥–∞–ª–µ–Ω–Ω—è certbot cron –∑–∞–≤–¥–∞–Ω—å
echo "üóëÔ∏è  –í–∏–¥–∞–ª–µ–Ω–Ω—è certbot cron –∑–∞–≤–¥–∞–Ω—å..."
crontab -l 2>/dev/null | grep -v certbot | crontab - 2>/dev/null || echo "‚ÑπÔ∏è  Cron –∑–∞–≤–¥–∞–Ω—å certbot –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ"

# –í–∏–¥–∞–ª–µ–Ω–Ω—è nginx cron –∑–∞–≤–¥–∞–Ω—å
crontab -l 2>/dev/null | grep -v nginx | crontab - 2>/dev/null || echo "‚ÑπÔ∏è  Cron –∑–∞–≤–¥–∞–Ω—å nginx –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ"

# –°–∏—Å—Ç–µ–º–Ω—ñ cron –∑–∞–≤–¥–∞–Ω–Ω—è
rm -f /etc/cron.d/certbot
rm -f /etc/cron.d/nginx*
rm -f /etc/cron.daily/nginx*
rm -f /etc/cron.weekly/nginx*
rm -f /etc/cron.monthly/nginx*

echo "‚úÖ Cron –∑–∞–≤–¥–∞–Ω–Ω—è –æ—á–∏—â–µ–Ω—ñ"

# ============================================
# –ö–†–û–ö 8: –í–ò–î–ê–õ–ï–ù–ù–Ø FIREWALL –ü–†–ê–í–ò–õ
# ============================================
echo ""
echo "üõ°Ô∏è  –ö–†–û–ö 8: –û—á–∏—â–µ–Ω–Ω—è firewall –ø—Ä–∞–≤–∏–ª..."

# UFW –ø—Ä–∞–≤–∏–ª–∞
if command -v ufw &> /dev/null; then
    echo "üóëÔ∏è  –í–∏–¥–∞–ª–µ–Ω–Ω—è UFW –ø—Ä–∞–≤–∏–ª –¥–ª—è HTTP/HTTPS..."
    ufw delete allow 80/tcp 2>/dev/null || echo "‚ÑπÔ∏è  HTTP –ø—Ä–∞–≤–∏–ª–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ"
    ufw delete allow 443/tcp 2>/dev/null || echo "‚ÑπÔ∏è  HTTPS –ø—Ä–∞–≤–∏–ª–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ"
    ufw delete allow 'Nginx Full' 2>/dev/null || echo "‚ÑπÔ∏è  Nginx Full –ø—Ä–∞–≤–∏–ª–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ"
    ufw delete allow 'Nginx HTTP' 2>/dev/null || echo "‚ÑπÔ∏è  Nginx HTTP –ø—Ä–∞–≤–∏–ª–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ"
    ufw delete allow 'Nginx HTTPS' 2>/dev/null || echo "‚ÑπÔ∏è  Nginx HTTPS –ø—Ä–∞–≤–∏–ª–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ"
else
    echo "‚ÑπÔ∏è  UFW –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ"
fi

# iptables –ø—Ä–∞–≤–∏–ª–∞ (–æ–±–µ—Ä–µ–∂–Ω–æ!)
echo "‚ö†Ô∏è  Firewall –ø—Ä–∞–≤–∏–ª–∞ –∑–∞–ª–∏—à–µ–Ω—ñ –±–µ–∑ –∑–º—ñ–Ω –¥–ª—è –±–µ–∑–ø–µ–∫–∏"

echo "‚úÖ Firewall –ø—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω—ñ"

# ============================================
# –ö–†–û–ö 9: –§–Ü–ù–ê–õ–¨–ù–ê –ü–ï–†–ï–í–Ü–†–ö–ê
# ============================================
echo ""
echo "üîç –ö–†–û–ö 9: –§—ñ–Ω–∞–ª—å–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞..."

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ª–∏—à–∫—ñ–≤
echo "üîç –ü–æ—à—É–∫ –∑–∞–ª–∏—à–∫—ñ–≤ nginx..."
find /etc -name "*nginx*" -type f 2>/dev/null | head -5
find /var -name "*nginx*" -type d 2>/dev/null | head -5
find /usr -name "*nginx*" -type f 2>/dev/null | head -5

echo ""
echo "üîç –ü–æ—à—É–∫ –∑–∞–ª–∏—à–∫—ñ–≤ SSL..."
find /etc -name "*letsencrypt*" -type d 2>/dev/null | head -5
find /var -name "*letsencrypt*" -type d 2>/dev/null | head -5

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—ñ–≤
echo ""
echo "üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—ñ–≤..."
if pgrep nginx > /dev/null; then
    echo "‚ö†Ô∏è  –ó–Ω–∞–π–¥–µ–Ω—ñ nginx –ø—Ä–æ—Ü–µ—Å–∏:"
    pgrep -l nginx
else
    echo "‚úÖ Nginx –ø—Ä–æ—Ü–µ—Å–∏ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω—ñ"
fi

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ—Ä—Ç—ñ–≤
echo ""
echo "üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ—Ä—Ç—ñ–≤ 80 —Ç–∞ 443..."
if netstat -tlnp 2>/dev/null | grep -E ":80 |:443 "; then
    echo "‚ö†Ô∏è  –ü–æ—Ä—Ç–∏ 80/443 –≤—Å–µ —â–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è:"
    netstat -tlnp 2>/dev/null | grep -E ":80 |:443 "
else
    echo "‚úÖ –ü–æ—Ä—Ç–∏ 80/443 –≤—ñ–ª—å–Ω—ñ"
fi

# ============================================
# –ó–ê–í–ï–†–®–ï–ù–ù–Ø
# ============================================
echo ""
echo "üéâ –ü–û–í–ù–ï –í–ò–î–ê–õ–ï–ù–ù–Ø –ó–ê–í–ï–†–®–ï–ù–û!"
echo ""
echo "üìã –©–æ –±—É–ª–æ –≤–∏–¥–∞–ª–µ–Ω–æ:"
echo "   ‚úÖ –í—Å—ñ nginx –ø–∞–∫–µ—Ç–∏ —Ç–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ"
echo "   ‚úÖ Certbot —Ç–∞ –≤—Å—ñ SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏"
echo "   ‚úÖ –í—Å—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ —Ñ–∞–π–ª–∏"
echo "   ‚úÖ –ö–µ—à, –ª–æ–≥–∏ —Ç–∞ —Ç–∏–º—á–∞—Å–æ–≤—ñ —Ñ–∞–π–ª–∏"
echo "   ‚úÖ Systemd —Å–µ—Ä–≤—ñ—Å–∏"
echo "   ‚úÖ Cron –∑–∞–≤–¥–∞–Ω–Ω—è"
echo "   ‚úÖ –ë—ñ–ª—å—à—ñ—Å—Ç—å firewall –ø—Ä–∞–≤–∏–ª"
echo ""
echo "‚ö†Ô∏è  –©–æ –ù–ï –±—É–ª–æ –≤–∏–¥–∞–ª–µ–Ω–æ (–¥–ª—è –±–µ–∑–ø–µ–∫–∏):"
echo "   - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á www-data (—è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è)"
echo "   - –û—Å–Ω–æ–≤–Ω—ñ iptables –ø—Ä–∞–≤–∏–ª–∞"
echo "   - –°–∏—Å—Ç–µ–º–Ω—ñ SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏"
echo ""
echo "üîÑ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:"
echo "   - –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Å–∏—Å—Ç–µ–º—É –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ –æ—á–∏—â–µ–Ω–Ω—è"
echo "   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –Ω–µ –∑–∞–ª–∏—à–∏–ª–∏—Å—è —ñ–Ω—à—ñ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∏"
echo "   - –í–∏–¥–∞–ª—ñ—Ç—å DNS –∑–∞–ø–∏—Å–∏ —è–∫—â–æ –Ω–µ –ø–ª–∞–Ω—É—î—Ç–µ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è"
echo ""
echo "‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ—á–∏—â–µ–Ω–∞ –≤—ñ–¥ nginx —Ç–∞ SSL –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤!"

# –ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
echo ""
read -p "üîÑ –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å–∏—Å—Ç–µ–º—É –∑–∞—Ä–∞–∑? (y/N): " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    echo "üîÑ –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥..."
    sleep 5
    reboot
else
    echo "‚ÑπÔ∏è  –†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å–∏—Å—Ç–µ–º—É –ø—ñ–∑–Ω—ñ—à–µ"
fi 